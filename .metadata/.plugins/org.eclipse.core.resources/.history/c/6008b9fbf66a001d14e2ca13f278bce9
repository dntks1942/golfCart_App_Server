package golfCartServer;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;

public class Server {
	public static void main(String args[]) throws IOException {
		int appPort = 1234;
		int vehiclePort = 1234;
		ServerSocket socket = new ServerSocket(appPort);
		Socket socketUser = null;
		System.out.println("socket : " + appPort + "으로 서버가 열렸습니다");
		boolean cartConnected = false;
		boolean appConnected = false;
		while(true) {
			socketUser = socket.accept();
			System.out.println("Clinet가 접속함 : " + socketUser.getInetAddress());
			
			InputStream input = socketUser.getInputStream();
			BufferedReader br = new BufferedReader(new InputStreamReader(input));
			
			String identification = br.readLine();
			
			OutputStream out = socketUser.getOutputStream();
			PrintWriter pr = new PrintWriter(out,true);
			System.out.println(identification);
			if(identification.equals("GOLFCART")) {
				pr.println("HELLO GOLFCART");
				cartConnected = true;
			}
			else if(identification.equals("PHONE")) {
				pr.println("HELLO PHONE");
			}
			else {
				pr.println("DENY");
			}
		}
	}

}
